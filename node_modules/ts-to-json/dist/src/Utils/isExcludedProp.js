"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isExcludedProp = void 0;
const Utils_1 = require("../Utils");
const arrayStartWith = (src, des) => {
    for (let i = 0; i < src.length; i++) {
        const item = src[i];
        const desItem = des[i];
        if (!desItem)
            break;
        if (item !== desItem)
            return false;
    }
    return true;
};
const isMaxDepth = (props, maxDepth) => {
    if (!maxDepth)
        return false;
    return maxDepth && props.length > maxDepth;
};
const isExcludedProp = (node, context, config) => {
    if (!(0, Utils_1.hasLimitOptions)(config))
        return false;
    if (config.excludeProps && config.excludeProps.length) {
        const name = (0, Utils_1.getAnyNodeName)(node);
        if (name && config.excludeProps.includes(name)) {
            return true;
        }
    }
    const props = (0, Utils_1.getPropsRecursively)(node, context);
    if (!props || !props.length)
        return false;
    if ((0, Utils_1.isMemberOfFunctionParameter)(node, context)) {
        if (isMaxDepth(props, config.funcParamMaxDepth)) {
            return true;
        }
        return false;
    }
    const chained = props === null || props === void 0 ? void 0 : props.join(".");
    const rootMaxDeptReached = isMaxDepth(props, config.maxDepth);
    if (config.includeProps && config.includeProps.length) {
        for (let i = 0; i < config.includeProps.length; i++) {
            const includeProp = config.includeProps[i];
            const includePropArr = includeProp.split(".");
            if (!rootMaxDeptReached &&
                (arrayStartWith(includePropArr, props) || arrayStartWith(props, includePropArr))) {
                return false;
            }
        }
    }
    else if (!rootMaxDeptReached && config.excludeRootProps && config.excludeRootProps.length) {
        if (!config.excludeRootProps.includes(chained)) {
            return false;
        }
    }
    else {
        if (!rootMaxDeptReached)
            return false;
    }
    return true;
};
exports.isExcludedProp = isExcludedProp;
//# sourceMappingURL=isExcludedProp.js.map